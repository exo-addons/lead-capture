<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <property name="autoIncrement" value="true" dbms="mysql,mssql,h2,sybase,db2,hsqldb"/>
    <property name="autoIncrement" value="false" dbms="oracle,postgresql"/>

    <!-- Definition of LEAD table -->
    <changeSet author="exo-lead-capture" id="1.0.0-1">
        <createTable tableName="ADDONS_LC_LEAD">

            <column name="ID" type="BIGINT" autoIncrement="${autoIncrement}" startWith="1">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_LC_LEAD"/>
            </column>
            <column name="MAIL" type="NVARCHAR(150)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="COMPANY" type="NVARCHAR(150)">
            </column>
            <column name="POSITION" type="NVARCHAR(150)">
            </column>
            <column name="COUNTRY" type="NVARCHAR(150)">
            </column>
            <column name="FIRST_NAME" type="NVARCHAR(150)">
            </column>
            <column name="LAST_NAME" type="NVARCHAR(150)">
            </column>
            <column name="STATUS" type="NVARCHAR(150)">
            </column>
            <column name="PHONE" type="NVARCHAR(150)">
            </column>
            <column name="CREATED_DATE" type="BIGINT">
            </column>
            <column name="UPDATED_DATE" type="BIGINT">
            </column>
            <column name="LANGUAGE" type="NVARCHAR(150)">
            </column>
            <column name="ASSIGNEE" type="NVARCHAR(150)">
            </column>
            <column name="GEOGRAPHIQUE_ZONE" type="NVARCHAR(150)">
            </column>
            <column name="MARKETING_SUSPENDED" type="BOOLEAN">
            </column>
            <column name="MARKETING_SUSPENDED_CAUSE" type="NVARCHAR(250)">
            </column>
            <column name="CAPTURE_METHOD" type="NVARCHAR(150)">
            </column>
            <column name="CAPTURE_TYPE" type="NVARCHAR(150)">
            </column>
            <column name="BLOG_SUBSCRIPTION" type="BOOLEAN">
            </column>
            <column name="BLOG_SUBSCRIPTION_DATE" type="BIGINT">
            </column>
            <column name="COMMUNITY_USER_NAME" type="NVARCHAR(150)">
            </column>
            <column name="COMMUNITY_REGISTRATION" type="BOOLEAN">
            </column>
            <column name="COMMUNITY_REGISTRATION_METHOD" type="NVARCHAR(150)">
            </column>
            <column name="COMMUNITY_REGISTRATION_DATE" type="BIGINT">
            </column>
            <column name="PERSON_SOURCE" type="NVARCHAR(250)">
            </column>
            <column name="LANDING_PAGE_INFO" type="NVARCHAR(250)">
            </column>
            <column name="CAPTURE_SOURCE_INFO" type="NVARCHAR(250)">
            </column>
            <column name="PERSON_IP" type="NVARCHAR(50)">
            </column>
            <column name="ORIGINAL_REFERRER" type="NVARCHAR(250)">
            </column>
        </createTable>

        <createTable tableName="ADDONS_LC_FORM">

            <column name="ID" type="BIGINT" autoIncrement="${autoIncrement}" startWith="1">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ADDONS_LC_FORM"/>
            </column>
            <column name="NAME" type="NVARCHAR(150)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="FIELDS" type="LONGTEXT">
            </column>
        </createTable>

        <createTable tableName="ADDONS_LC_RESPONSE">

            <column name="ID" type="BIGINT" autoIncrement="${autoIncrement}" startWith="1">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ADDONS_LC_RESPONSE"/>
            </column>
            <column name="LC_FORM_ID" type="BIGINT">
                <constraints nullable="false" foreignKeyName="FK_LC_FORM" references="ADDONS_LC_FORM(ID)" />
            </column>
            <column name="LC_LEAD_ID" type="BIGINT">
                <constraints nullable="false" foreignKeyName="FK_LC_LEAD" references="ADDONS_LC_LEAD(ID)" />
            </column>
            <column name="CREATED_DATE" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="ADDONS_LC_FORM_FIELD">
            <column name="ID" type="BIGINT" autoIncrement="${autoIncrement}" startWith="1">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ADDONS_LC_FORM_FIELD"/>
            </column>
            <column name="LC_RESPONSE_ID" type="BIGINT">
                <constraints nullable="false" foreignKeyName="FK_LC_RESPONSE" references="ADDONS_LC_RESPONSE(ID)" />
            </column>
            <column name="NAME" type="NVARCHAR(250)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="VALUE" type="NVARCHAR(250)">
                <constraints nullable="false" unique="true"/>
            </column>
        </createTable>



        <modifySql dbms="mysql">
            <append value=" ENGINE=INNODB CHARSET=UTF8 COLLATE utf8_general_ci"/>
        </modifySql>

    </changeSet>
    <changeSet author="exo-lead-capture" id="1.0.0-2" dbms="oracle,postgresql">
        <createSequence sequenceName="SEQ_ADDONS_LC_LEAD_ID" startValue="1"/>
        <createSequence sequenceName="ADDONS_LC_RESPONSE_ID" startValue="1"/>
        <createSequence sequenceName="ADDONS_LC_FORM_ID" startValue="1"/>
        <createSequence sequenceName="ADDONS_LC_FORM_FIELD_ID" startValue="1"/>
    </changeSet>

    <changeSet author="exo-lead-capture" id="1.0.0-3" dbms="oracle,postgresql">
        <createSequence sequenceName="SEQ_ADDONS_LC_RESPONSE_ID" startValue="1"/>
        <createSequence sequenceName="SEQ_ADDONS_LC_FORM_ID" startValue="1"/>
        <createSequence sequenceName="SEQ_ADDONS_LC_FORM_FIELD_ID" startValue="1"/>
    </changeSet>


</databaseChangeLog>


